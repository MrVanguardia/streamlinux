<?xml version="1.0" encoding="utf-8"?>
<!--
    Network Security Configuration for StreamLinux Android Client
    
    Security Policy:
    - Cleartext traffic allowed for local LAN connections (required for WebSocket signaling)
    - This app ONLY communicates with local network hosts (signaling server on LAN)
    - No external/internet servers are contacted for streaming functionality
    
    Security Note (vuln-0003):
    - We allow cleartext for LAN because the signaling server runs locally
    - WebRTC data channels use DTLS encryption regardless of signaling transport
    - Future: Implement WSS (WebSocket Secure) for signaling as well
-->
<network-security-config>
    <!-- 
        Allow cleartext for local network communication.
        StreamLinux connects to a signaling server on the same LAN.
        Android's domain-config doesn't support CIDR notation for IPs,
        so we validate private IPs in code (SignalingClient.kt).
    -->
    <base-config cleartextTrafficPermitted="true">
        <trust-anchors>
            <certificates src="system" />
        </trust-anchors>
    </base-config>
    
    <!-- Debug builds: Allow user-installed CA certs for testing -->
    <debug-overrides>
        <trust-anchors>
            <certificates src="system" />
            <certificates src="user" />
        </trust-anchors>
    </debug-overrides>
</network-security-config>
